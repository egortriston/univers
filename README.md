# Информационная система приемной комиссии университета

Система для управления процессом приема абитуриентов в университет.

## Технологии

- **Backend**: Node.js, Express
- **База данных**: PostgreSQL
- **Frontend**: Vanilla JavaScript, HTML, CSS
- **Аутентификация**: Session-based

## Структура проекта

```
univers/
├── config/
│   └── database.js          # Конфигурация подключения к БД
├── middleware/
│   └── auth.js              # Middleware для проверки прав доступа
├── routes/
│   ├── auth.js              # Маршруты аутентификации
│   ├── secretary.js         # API для секретаря
│   ├── teacher.js           # API для преподавателя
│   └── applicant.js         # API для абитуриента
├── public/
│   ├── css/
│   │   └── styles.css       # Стили приложения
│   ├── js/
│   │   ├── api.js           # API клиент
│   │   └── auth.js           # Утилиты аутентификации
│   ├── index.html           # Главная страница (вход)
│   ├── applicant.html       # Личный кабинет абитуриента
│   ├── teacher.html         # Личный кабинет преподавателя
│   └── secretary/
│       ├── dashboard.html   # Дашборд секретаря
│       ├── applicants.html  # Управление абитуриентами
│       ├── groups.html      # Управление экзаменами
│       └── settings.html    # Справочники и настройки
├── database/
│   └── schema.sql           # SQL схема БД (опционально)
├── server.js                # Главный файл сервера
└── package.json             # Зависимости проекта
```

## Установка и запуск

### 1. Установка зависимостей

```bash
npm install
```

### 2. Настройка базы данных

Убедитесь, что PostgreSQL запущен и база данных создана. Настройте подключение в файле `.env`:

```env
DB_HOST=localhost
DB_PORT=5432
DB_NAME=university_admission
DB_USER=postgres
DB_PASSWORD=postgres

SESSION_SECRET=your-secret-key-change-in-production
PORT=3000
```

Создайте файл `.env` на основе `.env.example`:

```bash
cp .env.example .env
```

### 3. Инициализация базы данных

База данных должна быть уже создана и заполнена данными. Если нужно создать структуру таблиц, используйте SQL скрипт из `database/schema.sql`.

### 4. Запуск сервера

```bash
npm start
```

Для разработки с автоматической перезагрузкой:

```bash
npm run dev
```

Сервер будет доступен по адресу: `http://localhost:3000`

## Модули системы

### Модуль 1: Рабочее место секретаря

#### Дашборд (`/secretary/dashboard.html`)
- Статистика по заявлениям
- Количество зачисленных абитуриентов
- Статистика по статусам
- Ближайшие экзамены

#### Управление абитуриентами (`/secretary/applicants.html`)
- Просмотр списка всех абитуриентов
- Добавление/редактирование абитуриентов
- Фильтрация и поиск
- Изменение статуса заявления
- Просмотр детальной информации и результатов экзаменов

#### Управление экзаменами (`/secretary/groups.html`)
- Создание экзаменационных групп
- Назначение преподавателей на группы
- Добавление абитуриентов в группы
- Ввод результатов экзаменов

#### Справочники (`/secretary/settings.html`)
- Управление специальностями (CRUD)
- Управление преподавателями (CRUD)
- Управление предметами (CRUD)
- Назначение предметов специальностям
- Управление ролями преподавателей

### Модуль 2: Рабочее место преподавателя

#### Личный кабинет (`/teacher.html`)
- Просмотр назначенных групп
- Просмотр списка абитуриентов в группе
- Ввод баллов за экзамены (после даты экзамена)

### Модуль 3: Личный кабинет абитуриента

#### Вход (`/`)
- Вход для абитуриентов (email/пароль)
- Вход для сотрудников (email/пароль)

#### Мое заявление (`/applicant.html`)
- Просмотр статуса заявления
- Информация о заявлении
- Список вступительных экзаменов с результатами
- Итоговый балл
- Кнопка для сообщения об ошибке

## Система аутентификации

### Типы пользователей

1. **Абитуриент** - вход по email/паролю из таблицы `applicants`
2. **Сотрудник** - вход по email/паролю из таблицы `teachers`

### Роли сотрудников

- **Преподаватель** (`is_teacher = true`) - доступ к модулю преподавателя
- **Секретарь** (`is_secretary = true`) - полный доступ ко всем функциям
- Возможны комбинированные роли

### Логика доступа

- При входе сотрудника автоматическое перенаправление согласно ролям
- Если `is_teacher = false` и `is_secretary = false` - доступ запрещен

## API Endpoints

### Аутентификация
- `POST /api/auth/login/applicant` - Вход абитуриента
- `POST /api/auth/login/staff` - Вход сотрудника
- `POST /api/auth/logout` - Выход
- `GET /api/auth/me` - Текущий пользователь

### Секретарь (`/api/secretary/*`)
- `GET /api/secretary/dashboard/stats` - Статистика дашборда
- `GET /api/secretary/applicants` - Список абитуриентов
- `GET /api/secretary/applicants/:id` - Детали абитуриента
- `POST /api/secretary/applicants` - Создать абитуриента
- `PUT /api/secretary/applicants/:id` - Обновить абитуриента
- `GET /api/secretary/groups` - Список групп
- `GET /api/secretary/groups/:id` - Детали группы
- `POST /api/secretary/groups` - Создать группу
- `PUT /api/secretary/groups/:id/results` - Обновить результаты
- И другие...

### Преподаватель (`/api/teacher/*`)
- `GET /api/teacher/groups` - Группы преподавателя
- `GET /api/teacher/groups/:id` - Детали группы
- `PUT /api/teacher/groups/:id/results` - Сохранить результаты

### Абитуриент (`/api/applicant/*`)
- `GET /api/applicant/application` - Информация о заявлении

## Дизайн

- **Стиль**: Modern Flat Design
- **Цветовая схема**:
  - Основной: #2C5AA0
  - Фон: #f5f5f5
  - Текст: #333333
  - Статусы: registered (#FF9800), admitted (#4CAF50), rejected (#F44336)

## Примечания

- Пароли хранятся в хешированном виде (bcrypt)
- Сессии хранятся в памяти (для продакшена рекомендуется использовать Redis или БД)
- Все даты и время отображаются в формате локали пользователя

